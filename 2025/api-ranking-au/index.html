<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rank Mode</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="text-center">
    <div class="container mt-4">
        <h2 class="mb-4">Rank Mode</h2>
        <div class="table-responsive">
            <table class="table table-bordered table-striped ">
                <thead class="">
                    <tr>
                        <th>อันดับ</th>
                        <th>ชื่อ</th>
                        <th>กิลด์</th>
                        <th>CP เริ่มต้น</th>
                        <th>CP ปัจจุบัน</th>
                        <th>การเติบโต CP</th>
                    </tr>
                </thead>
                <tbody id="rankingTableBody">
                    <tr><td colspan="6">กำลังโหลดข้อมูล...</td></tr>
                </tbody>
            </table>
        </div>
    </div>
    <script>
        async function fetchRanking() {
            try {
                const response = await fetch('https://secure2.playpark.com/RankingEvent/RankingBoardAPI.ashx?EventID=3');
                const result = await response.json();
                const tableBody = document.getElementById("rankingTableBody");
                
                if (result.data && result.data.length > 0) {
                    tableBody.innerHTML = "";
                    result.data.forEach(player => {
                        const row = `<tr>
                            <td>${player.ranking}</td>
                            <td>${player.role_name}</td>
                            <td>${player.guild_name || '-'}</td>
                            <td>${player.start_cp}</td>
                            <td>${player.current_cp}</td>
                            <td>${player.grouwth_cp}</td>
                        </tr>`;
                        tableBody.innerHTML += row;
                    });
                } else {
                    tableBody.innerHTML = "<tr><td colspan='6'>ไม่มีข้อมูล</td></tr>";
                }
            } catch (error) {
                console.error("Error fetching data:", error);
                document.getElementById("rankingTableBody").innerHTML = "<tr><td colspan='6'>เกิดข้อผิดพลาดในการโหลดข้อมูล</td></tr>";
            }
        }

        fetchRanking();
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
